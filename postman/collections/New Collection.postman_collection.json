{
  "info": {
    "_postman_id": "d456885c-d1e4-40ec-8309-411d12b5bc3c",
    "name": "GorestAPI-Chaining",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create User",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "d948eae9-dd16-4043-99e3-e88e3873767f",
            "exec": [
              "var random = Math.random().toString(36).substring(2);\r",
              "var email = \"ra\"+ random+\"@gmail.com\";\r",
              "var name = \"ra\"+ random;\r",
              "\r",
              "pm.environment.set(\"username\", name);\r",
              "pm.environment.set(\"email\", email);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "fbf8bf09-3c4d-4fb6-82e6-e631b511ef87",
            "exec": [
              "var jsonData = JSON.parse(responseBody);\r",
              "pm.environment.set(\"user_id\",jsonData.id);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "cbe3d49c-a406-4f72-b785-3f455b88c432",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\": \"{{username}}\",\r\n    \"gender\": \"male\",\r\n    \"email\": \"{{email}}\",\r\n    \"status\": \"active\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{url_collect}}/users",
          "host": [
            "{{url_collect}}"
          ],
          "path": [
            "users"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Get User Details",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "2056bd8b-eb5e-430a-89fd-660abca4552c",
            "exec": [
              "//validating json fields in the response\r",
              "pm.test(\"values of json fields\", () => {\r",
              "    var jsonData = pm.response.json();\r",
              "\r",
              "    var user_id = pm.environment.get(\"user_id\");\r",
              "    var email = pm.environment.get(\"email\");\r",
              "    var username = pm.environment.get(\"username\")\r",
              "    \r",
              "    pm.expect(jsonData.name).to.eql(username)\r",
              "    pm.expect(jsonData.id).to.eql(user_id);\r",
              "    pm.expect(jsonData.email).to.eql(email);\r",
              "})"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "prerequest",
          "script": {
            "id": "0aaaf0d7-90c6-4668-a448-60c60faeeff0",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "b542bcd4-53b5-427b-991e-4a6ff0f75650",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{url_collect}}/users/{{user_id}}",
          "host": [
            "{{url_collect}}"
          ],
          "path": [
            "users",
            "{{user_id}}"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Update User Details",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "c49f2a10-1cda-4bf6-888f-5c77bd8efe05",
            "exec": [
              "var random = Math.random().toString(36).substring(3);\r",
              "\r",
              "var username = \"sac\" + random;\r",
              "var email = \"sac\"+ random + \"@gmail.com\";\r",
              "\r",
              "pm.environment.set(\"username\",username);\r",
              "pm.environment.set(\"email\",email);"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "5206be5c-54b0-44ac-a63e-1c382b3bb653",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "4134db3b-866a-4365-ad10-0a6e574f2ad0",
      "request": {
        "method": "PUT",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\": \"{{username}}\",\r\n    \"email\": \"{{email}}\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "{{url_collect}}/users/{{user_id}}",
          "host": [
            "{{url_collect}}"
          ],
          "path": [
            "users",
            "{{user_id}}"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Delete User",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "7116de08-b066-409d-a2b9-fd7c051b2cb8",
            "exec": [
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "4798a162-8754-4f32-a2f9-95097e2a416b",
            "exec": [
              "pm.environment.unset(\"username\");\r",
              "pm.environment.unset(\"email\");\r",
              "pm.environment.unset(\"user_id\");"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "3fb80774-1cd5-4c01-8100-b6b3b27d99ed",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{url_collect}}/users/{{user_id}}",
          "host": [
            "{{url_collect}}"
          ],
          "path": [
            "users",
            "{{user_id}}"
          ]
        }
      },
      "response": []
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "id": "a25157f3-7632-43e7-bb9d-f4ecfbcc0361",
      "key": "url_collect",
      "value": ""
    },
    {
      "id": "08855097-e96e-4c6c-9216-dc65adfa9508",
      "key": "access_token",
      "value": ""
    }
  ]
}